---
title: "Secure Hash Algorithm(SHA)"
thumbnail: "./javascript.png"
thumbnail_alt: "javascript"
summary: "JS 내장 객체인 crypto 모듈을 사용하여 암호화하기"
initial_date: "2023-03-15"
modified_date: "2023-03-15"
deploy: true
keywords:
  - Javascript
toc:
  - 1. SHA가 뭘까?
  - 2. Hash가 뭘까?
    * 2.1 Hash
    * 2.2 해싱 알고리즘 특징
    * 2.3 해싱 알고리즘 단점
    * 2.4 해싱 알고리즘 단점 보안
    * 2.5 솔트(salt)
  - 3. SHA 종류
    * 3.1 SHA-1
    * 3.2 SHA-2
---

import { Image } from "../../../src/components/Common/Image";
import { Link } from "../../../src/components/Common/Link";
import { Source } from "../../../src/components/Common/Source";
import { Baseline } from "../../../src/components/Common/Baseline";
import { Highlight } from "../../../src/components/Common/Highlight";
import { Blockquote } from "../../../src/components/Common/Blockquote";
import { TextHighlight } from "../../../src/components/Common/TextHighlight";
import { Title, Subtitle, ThirdTitle } from "../../../src/components/Common/Title";

<Blockquote>
  JS 내장 객체인 crypto 모듈을 사용해 SHA-256으로 비밀번호 암호화하는 과정을 글로 정리해보려고 한다.
</Blockquote>

<Title id="1" title="1. SHA가 뭘까?" />

- 사람은 누구나 지문을 가지고 있고 각자의 지문은 서로 다르다. 같은 지문을 가질 사람의 확률은 약 6천만분의 1이라고 한다.
- 디지털 문서에도 사람과 같은 지문이 존재하는데 그 지문들 중 하나가 SHA-256 해시값이다.

- SHA는 Secure Hash Algorithm의 약자로 직역하면 안전한 해시 알고리즘이다.
- 그렇다면 해시(Hash)는 뭘까?

<Title id="2" title="2. 해시(Hash)가 뭘까?" />

<Subtitle id="2.1" title="2.1 해시(Hash)" />

- 어떤 알고리즘에 의해 원본 데이터를 매핑시켜 완전히 다른 암호화된 데이터로 변환시키는 것을 의미한다. 
  (그림 참고 https://st-lab.tistory.com/100)
- 이 변환을 해시라고 하고, 해시에 의해 암호화된 데이터를 다이제스트(digest)라고 한다.
- 예를 들어) 비밀번호 123456을 SHA-256을 통해 해시 값을 생성하면 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92 라는 해시값이 생성된다.
  

<Subtitle id="2.2" title="2.2 해싱 알고리즘 특징" />

- 단방향(One-Way)
  - 단방향 해시 함수는 다이제스트를 복호화, 즉 원본 데이터를 구할 수는 없다.
- 결정적(Deterministic)
  - 동일한 문자열을 해싱 알고리즘에 적용하면 동일한 결과값을 얻는다. => 해싱 알고리즘의 단점
- 빠른 연산(Fast Computation) => 해싱 알고리즘의 장단점
- 쇄도 효과(The Avalanche Effect)
- 충돌 저항성(Must withstand collisions)

<Subtitle id="2.3" title="2.3 해싱 알고리즘 단점" />

- 해싱 알고리즘의 특징 중 하나인 "동일한 문자열은 동일한 결과값을 갖는다" 라는 문장은 치명적인 단점을 가지고 있다.
- <Link link="https://crackstation.net/" target="_blank">CrackStation</Link> 이라는 사이트에 접속해 아까 생성된 해시값을 넣어보자.
- 해싱 알고리즘의 종류와 다이제스트 값을 바로 알아낼 수 있다.
- 이처럼 해싱 알고리즘을 통해 암호화 한다고 해도 동일한 결과값을 얻는다는 특징 때문에 문제가 발생한다.


<Subtitle id="2.4" title="2.4 해싱 알고리즘 단점 보안" />

- 해싱 알고리즘의 단점을 보안하는 방법은 크게 두 가지가 있다.
- 첫 번째는 해싱 알고리즘을 여러 번 실행하는 키-스트레칭(key-stretching) 방법이고 두 번째는 솔트(salt)를 사용하는 방법이다.


<Subtitle id="2.5" title="2.5 솔트(salt)" />


<Title id="3" title="3. SHA 종류" />

<Subtitle id="3.1" title="3.1 SHA-1" />

- 컴퓨터는 0과 1로만 이루어져 있어서 10진법으로 계산하는 우리와 달리 2진법을 통해 계산한다.
- 몇몇 소수의 경우 10진법을 2진법을 변환할 때 무한소수가 되어버린다.
- 이 때, 한정적인 컴퓨터의 자원을 활용하는 프로그램은 저장공간의 한계로 인해 무한 소수를 반올림하여 유한 소수로 바꾸게 된다.
- 이 때문에 미세한 오차가 발생한다.

<Subtitle id="3.2" title="3.2 SHA-2" />

- 자바스크립트에서 숫자 타입은 내부적으로 64비트 형식인 IEEE-754으로 표현되기 때문에 숫자를 저장하려면 64비트가 필요하다.
- 이 때, 64비트는 중 52비트는 숫자를, 11비트는 소수점 위치를, 나머지 1비트는 부호를 저장하는데 사용된다.
- 그런데 너무 큰 수는 표현하는데 64비트를 초과하기 때문에 Infinity 타입으로 처리 된다.


<Source 
  lists={[
    ["MDN - toFixed()", "https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed"],
    ["MDN - Math.round()", "https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Math/round"]
  ]} 
/>